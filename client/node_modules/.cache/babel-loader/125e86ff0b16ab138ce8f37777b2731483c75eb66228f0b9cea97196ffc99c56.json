{"ast":null,"code":"import{useEffect,useState,useContext}from'react';import{getBooks,addBook,deleteBook}from'../utils/api';import{AuthContext}from'../utils/AuthContext';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminBooks=()=>{const{user}=useContext(AuthContext);const[books,setBooks]=useState([]);useEffect(()=>{const fetchBooks=async()=>{const data=await getBooks();setBooks(data);};fetchBooks();},[]);const validationSchema=Yup.object({title:Yup.string().required('Title is required'),author:Yup.string().required('Author is required'),isbn:Yup.string().matches(/^\\d{13}$/,'ISBN must be 13 digits').required('ISBN is required'),available_copies:Yup.number().min(0,'Must be at least 0').required('Available copies is required')});const handleDelete=async id=>{await deleteBook(id,user.token);setBooks(prevBooks=>prevBooks.filter(book=>book.id!==id));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Manage Books\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Add Book\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{title:'',author:'',isbn:'',available_copies:''},validationSchema:validationSchema,onSubmit:async(values,_ref)=>{let{resetForm}=_ref;const newBook=await addBook(values,user.token);setBooks(prevBooks=>[...prevBooks,newBook]);resetForm();},children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(Field,{name:\"title\",type:\"text\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"title\",component:\"div\",className:\"error\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Author\"}),/*#__PURE__*/_jsx(Field,{name:\"author\",type:\"text\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"author\",component:\"div\",className:\"error\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"ISBN\"}),/*#__PURE__*/_jsx(Field,{name:\"isbn\",type:\"text\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"isbn\",component:\"div\",className:\"error\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Available Copies\"}),/*#__PURE__*/_jsx(Field,{name:\"available_copies\",type:\"number\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"available_copies\",component:\"div\",className:\"error\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Add Book\"})]})})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Book List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#e5e7eb'},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',textAlign:'left'},children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',textAlign:'left'},children:\"Author\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',textAlign:'left'},children:\"ISBN\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',textAlign:'left'},children:\"Copies\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'10px',textAlign:'left'},children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:books.map(book=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #d1d5db'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px'},children:book.title}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px'},children:book.author}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px'},children:book.isbn}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px'},children:book.available_copies}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'10px'},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(book.id),className:\"btn btn-secondary\",children:\"Delete\"})})]},book.id))})]})})]});};export default AdminBooks;","map":{"version":3,"names":["useEffect","useState","useContext","getBooks","addBook","deleteBook","AuthContext","Formik","Form","Field","ErrorMessage","Yup","jsx","_jsx","jsxs","_jsxs","AdminBooks","user","books","setBooks","fetchBooks","data","validationSchema","object","title","string","required","author","isbn","matches","available_copies","number","min","handleDelete","id","token","prevBooks","filter","book","children","className","style","marginBottom","initialValues","onSubmit","values","_ref","resetForm","newBook","name","type","component","width","borderCollapse","background","padding","textAlign","map","borderBottom","onClick"],"sources":["/home/yusufmim/Library-Management-System/Library-Management-System/client/src/pages/AdminBooks.js"],"sourcesContent":["import { useEffect, useState, useContext } from 'react';\nimport { getBooks, addBook, deleteBook } from '../utils/api';\nimport { AuthContext } from '../utils/AuthContext';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\n\nconst AdminBooks = () => {\n  const { user } = useContext(AuthContext);\n  const [books, setBooks] = useState([]);\n\n  useEffect(() => {\n    const fetchBooks = async () => {\n      const data = await getBooks();\n      setBooks(data);\n    };\n\n    fetchBooks();\n  }, []);\n\n  const validationSchema = Yup.object({\n    title: Yup.string().required('Title is required'),\n    author: Yup.string().required('Author is required'),\n    isbn: Yup.string()\n      .matches(/^\\d{13}$/, 'ISBN must be 13 digits')\n      .required('ISBN is required'),\n    available_copies: Yup.number()\n      .min(0, 'Must be at least 0')\n      .required('Available copies is required'),\n  });\n\n  const handleDelete = async (id) => {\n    await deleteBook(id, user.token);\n    setBooks(prevBooks => prevBooks.filter(book => book.id !== id));\n  };\n\n  return (\n    <div>\n      <h1>Manage Books</h1>\n\n      <div className=\"card\" style={{ marginBottom: '1.5rem' }}>\n        <h2>Add Book</h2>\n        <Formik\n          initialValues={{\n            title: '',\n            author: '',\n            isbn: '',\n            available_copies: '',\n          }}\n          validationSchema={validationSchema}\n          onSubmit={async (values, { resetForm }) => {\n            const newBook = await addBook(values, user.token);\n            setBooks(prevBooks => [...prevBooks, newBook]);\n            resetForm();\n          }}\n        >\n          <Form>\n            <div className=\"form-group\">\n              <label>Title</label>\n              <Field name=\"title\" type=\"text\" />\n              <ErrorMessage name=\"title\" component=\"div\" className=\"error\" />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Author</label>\n              <Field name=\"author\" type=\"text\" />\n              <ErrorMessage name=\"author\" component=\"div\" className=\"error\" />\n            </div>\n\n            <div className=\"form-group\">\n              <label>ISBN</label>\n              <Field name=\"isbn\" type=\"text\" />\n              <ErrorMessage name=\"isbn\" component=\"div\" className=\"error\" />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Available Copies</label>\n              <Field name=\"available_copies\" type=\"number\" />\n              <ErrorMessage\n                name=\"available_copies\"\n                component=\"div\"\n                className=\"error\"\n              />\n            </div>\n\n            <button type=\"submit\" className=\"btn btn-primary\">\n              Add Book\n            </button>\n          </Form>\n        </Formik>\n      </div>\n\n      <h2>Book List</h2>\n      <div className=\"card\">\n        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n          <thead>\n            <tr style={{ background: '#e5e7eb' }}>\n              <th style={{ padding: '10px', textAlign: 'left' }}>Title</th>\n              <th style={{ padding: '10px', textAlign: 'left' }}>Author</th>\n              <th style={{ padding: '10px', textAlign: 'left' }}>ISBN</th>\n              <th style={{ padding: '10px', textAlign: 'left' }}>Copies</th>\n              <th style={{ padding: '10px', textAlign: 'left' }}>Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {books.map(book => (\n              <tr key={book.id} style={{ borderBottom: '1px solid #d1d5db' }}>\n                <td style={{ padding: '10px' }}>{book.title}</td>\n                <td style={{ padding: '10px' }}>{book.author}</td>\n                <td style={{ padding: '10px' }}>{book.isbn}</td>\n                <td style={{ padding: '10px' }}>{book.available_copies}</td>\n                <td style={{ padding: '10px' }}>\n                  <button\n                    onClick={() => handleDelete(book.id)}\n                    className=\"btn btn-secondary\"\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminBooks;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}