{"ast":null,"code":"var _jsxFileName = \"/home/yusufmim/Library-Management-System/Library-Management-System/client/src/pages/BookDetails.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getBook } from '../utils/api';\nimport ReviewForm from '../components/ReviewForm';\nimport { AuthContext } from '../utils/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst fetchBook = async id => {\n  const data = await getBook(id);\n  return data;\n};\nconst BookDetails = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [book, setBook] = useState(null);\n  useEffect(() => {\n    const loadBook = async () => {\n      const data = await fetchBook(id);\n      setBook(data);\n    };\n    loadBook();\n  }, [id]); // Only re-run when id changes\n\n  if (!book) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px',\n      textAlign: 'center'\n    },\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: book.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book-details\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: \"https://via.placeholder.com/200x300\",\n        alt: `${book.title} cover`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"book-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Author:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 14\n          }, this), \" \", book.author]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"ISBN:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 14\n          }, this), \" \", book.isbn]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Available Copies:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 14\n          }, this), \" \", book.available_copies]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this), user && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          style: {\n            marginTop: '1rem'\n          },\n          children: \"Borrow Book\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Reviews\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), book.reviews.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No reviews yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        flexDirection: 'column',\n        gap: '1rem'\n      },\n      children: book.reviews.map(review => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"review-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: review.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 18\n          }, this), \": \", review.rating, \"/5\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: review.comment\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 15\n        }, this)]\n      }, review.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this), user && /*#__PURE__*/_jsxDEV(ReviewForm, {\n      bookId: id,\n      onReviewAdded: () => fetchBook(id).then(setBook)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 16\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n};\n_s(BookDetails, \"iInfc6TsmhjRHQjQvLHYcCndR48=\", false, function () {\n  return [useParams];\n});\n_c = BookDetails;\nexport default BookDetails;\nvar _c;\n$RefreshReg$(_c, \"BookDetails\");","map":{"version":3,"names":["useEffect","useState","useContext","useParams","getBook","ReviewForm","AuthContext","jsxDEV","_jsxDEV","fetchBook","id","data","BookDetails","_s","user","book","setBook","loadBook","style","padding","textAlign","children","fileName","_jsxFileName","lineNumber","columnNumber","title","className","src","alt","author","isbn","available_copies","marginTop","reviews","length","display","flexDirection","gap","map","review","rating","comment","bookId","onReviewAdded","then","_c","$RefreshReg$"],"sources":["/home/yusufmim/Library-Management-System/Library-Management-System/client/src/pages/BookDetails.js"],"sourcesContent":["import { useEffect, useState, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { getBook } from '../utils/api';\nimport ReviewForm from '../components/ReviewForm';\nimport { AuthContext } from '../utils/AuthContext';\n\nconst fetchBook = async (id) => {\n  const data = await getBook(id);\n  return data;\n};\n\nconst BookDetails = () => {\n  const { id } = useParams();\n  const { user } = useContext(AuthContext);\n  const [book, setBook] = useState(null); \n\n  useEffect(() => {\n    const loadBook = async () => {\n      const data = await fetchBook(id);\n      setBook(data);\n    };\n    loadBook();\n  }, [id]); // Only re-run when id changes\n\n  if (!book) return <div style={{ padding: '20px', textAlign: 'center' }}>Loading...</div>;\n\n  return (\n    <div>\n      <h1>{book.title}</h1>\n      <div className=\"book-details\">\n        <img src=\"https://via.placeholder.com/200x300\" alt={`${book.title} cover`} />\n        <div className=\"book-info\">\n          <p><strong>Author:</strong> {book.author}</p>\n          <p><strong>ISBN:</strong> {book.isbn}</p>\n          <p><strong>Available Copies:</strong> {book.available_copies}</p>\n          {user && (\n            <button className=\"btn btn-primary\" style={{ marginTop: '1rem' }}>\n              Borrow Book\n            </button>\n          )}\n        </div>\n      </div>\n      <h2>Reviews</h2>\n      {book.reviews.length === 0 ? (\n        <p>No reviews yet.</p>\n      ) : (\n        <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n          {book.reviews.map(review => (\n            <div key={review.id} className=\"review-card\">\n              <p><strong>{review.user}</strong>: {review.rating}/5</p>\n              <p>{review.comment}</p>\n            </div>\n          ))}\n        </div>\n      )}\n      {user && <ReviewForm bookId={id} onReviewAdded={() => fetchBook(id).then(setBook)} />}\n    </div>\n  );\n};\n\nexport default BookDetails;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}