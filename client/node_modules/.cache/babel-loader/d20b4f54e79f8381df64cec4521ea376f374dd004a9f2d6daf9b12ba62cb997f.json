{"ast":null,"code":"// src/pages/Profile.js\nimport{useContext,useEffect,useState}from'react';import{AuthContext}from'../utils/AuthContext';import{getProfile}from'../utils/api';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Profile=()=>{var _profile$borrow_recor;const{user}=useContext(AuthContext);const[profile,setProfile]=useState(null);const[error,setError]=useState(null);useEffect(()=>{const fetchProfile=async()=>{try{const data=await getProfile(user.token);setProfile(data);}catch(err){console.error('Profile fetch error:',err.message);setError(err.message);}};fetchProfile();},[user]);const validationSchema=Yup.object({username:Yup.string().required('Username is required'),email:Yup.string().email('Invalid email format').required('Email is required')});if(error)return/*#__PURE__*/_jsx(\"div\",{style:{color:'red',padding:'20px'},children:error});if(!profile)return/*#__PURE__*/_jsx(\"div\",{style:{padding:'20px',textAlign:'center'},children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{display:'flex',alignItems:'center',gap:'20px'},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://via.placeholder.com/100\",alt:\"Profile\",style:{borderRadius:'50%'}}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Update Profile\"}),/*#__PURE__*/_jsx(Formik,{initialValues:{username:profile.username,email:profile.email},validationSchema:validationSchema,onSubmit:async values=>{console.log('Update profile:',values);},children:/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),/*#__PURE__*/_jsx(Field,{name:\"username\",type:\"text\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"username\",component:\"div\",className:\"error\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(Field,{name:\"email\",type:\"email\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"email\",component:\"div\",className:\"error\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Update\"})]})})]})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Borrowing History\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',flexDirection:'column',gap:'1rem'},children:(_profile$borrow_recor=profile.borrow_records)===null||_profile$borrow_recor===void 0?void 0:_profile$borrow_recor.map(record=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Book:\"}),\" \",record.book.title]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Borrow Date:\"}),\" \",new Date(record.borrow_date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Return Date:\"}),\" \",record.return_date?new Date(record.return_date).toLocaleDateString():'Not returned']})]},record.id))})]});};export default Profile;","map":{"version":3,"names":["useContext","useEffect","useState","AuthContext","getProfile","Formik","Form","Field","ErrorMessage","Yup","jsx","_jsx","jsxs","_jsxs","Profile","_profile$borrow_recor","user","profile","setProfile","error","setError","fetchProfile","data","token","err","console","message","validationSchema","object","username","string","required","email","style","color","padding","children","textAlign","className","display","alignItems","gap","src","alt","borderRadius","initialValues","onSubmit","values","log","name","type","component","flexDirection","borrow_records","map","record","book","title","Date","borrow_date","toLocaleDateString","return_date","id"],"sources":["/home/yusufmim/Library-Management-System/Library-Management-System/client/src/pages/Profile.js"],"sourcesContent":["// src/pages/Profile.js\nimport { useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../utils/AuthContext';\nimport { getProfile } from '../utils/api';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\n\nconst Profile = () => {\n  const { user } = useContext(AuthContext);\n  const [profile, setProfile] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchProfile = async () => {\n      try {\n        const data = await getProfile(user.token);\n        setProfile(data);\n      } catch (err) {\n        console.error('Profile fetch error:', err.message);\n        setError(err.message);\n      }\n    };\n    fetchProfile();\n  }, [user]);\n\n  const validationSchema = Yup.object({\n    username: Yup.string().required('Username is required'),\n    email: Yup.string().email('Invalid email format').required('Email is required'),\n  });\n\n  if (error) return <div style={{ color: 'red', padding: '20px' }}>{error}</div>;\n  if (!profile) return <div style={{ padding: '20px', textAlign: 'center' }}>Loading...</div>;\n\n  return (\n    <div>\n      <h1>Profile</h1>\n      <div className=\"card\" style={{ display: 'flex', alignItems: 'center', gap: '20px' }}>\n        <img src=\"https://via.placeholder.com/100\" alt=\"Profile\" style={{ borderRadius: '50%' }} />\n        <div>\n          <h2>Update Profile</h2>\n          <Formik\n            initialValues={{ username: profile.username, email: profile.email }}\n            validationSchema={validationSchema}\n            onSubmit={async (values) => {\n              console.log('Update profile:', values);\n            }}\n          >\n            <Form>\n              <div className=\"form-group\">\n                <label>Username</label>\n                <Field name=\"username\" type=\"text\" />\n                <ErrorMessage name=\"username\" component=\"div\" className=\"error\" />\n              </div>\n              <div className=\"form-group\">\n                <label>Email</label>\n                <Field name=\"email\" type=\"email\" />\n                <ErrorMessage name=\"email\" component=\"div\" className=\"error\" />\n              </div>\n              <button type=\"submit\" className=\"btn btn-primary\">Update</button>\n            </Form>\n          </Formik>\n        </div>\n      </div>\n      <h2>Borrowing History</h2>\n      <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>\n        {profile.borrow_records?.map(record => (\n          <div key={record.id} className=\"card\">\n            <p><strong>Book:</strong> {record.book.title}</p>\n            <p><strong>Borrow Date:</strong> {new Date(record.borrow_date).toLocaleDateString()}</p>\n            <p><strong>Return Date:</strong> {record.return_date ? new Date(record.return_date).toLocaleDateString() : 'Not returned'}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}